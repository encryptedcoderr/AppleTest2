#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

#include <sys/ioctl.h>
#include <sys/socket.h>
#include <net/if_arp.h>
#include <net/if.h>

int main(int argc, char** argv) {
  struct ifreq ifr = {0};
  uint8_t mac[6] = {0x22, 0x23, 0x24, 0x00, 0x00, 0x00};
  memcpy(&ifr.ifr_hwaddr.sa_data[0], mac, 6);
  int s = socket(AF_INET, SOCK_DGRAM, 0);
  strcpy(ifr.ifr_name, "wlan2");
  ifr.ifr_hwaddr.sa_family = ARPHRD_ETHER;
  int ret = ioctl(s, SIOCSIFHWADDR, &ifr);
  printf("ioctl retval: %d\n", ret);

  return 0;
}
